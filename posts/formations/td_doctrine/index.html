<!doctype html><html lang=en><head><title>TD Doctrine 2</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.34793ea3875bfaaa88436c36fa80f08bc736978d47b512f83f32b8acbae3a603.css integrity="sha256-NHk+o4db+qqIQ2w2+oDwi8c2l41HtRL4PzK4rLrjpgM="><link rel=icon type=image/png href=/images/site/secnumacademie_toque_hu_eca97eec4ef0563a.png><meta property="og:url" content="https://fransee.github.io/posts/formations/td_doctrine/"><meta property="og:site_name" content="FRANSEE's Blog"><meta property="og:title" content="TD Doctrine 2"><meta property="og:description" content="TD Doctrine formation bases initiation"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-06-05T07:15:25+00:00"><meta property="article:modified_time" content="2021-06-05T07:15:25+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="TD Doctrine 2"><meta name=twitter:description content="TD Doctrine formation bases initiation"><meta name=description content="TD Doctrine formation bases initiation"><script async src="https://www.googletagmanager.com/gtag/js?id=G-L8WV0RBRYG"></script><script>var dnt,doNotTrack=!1;if(null&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-L8WV0RBRYG")}</script><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/><img src=/images/site/FP_hu_d6ee7720cefea748.png id=logo alt=Logo>
FRANSEE's Blog</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/#experiences>Experiences</a></li><li class=nav-item><a class=nav-link href=/#education>Education</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>More</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/#projects>Projects</a>
<a class=dropdown-item href=/#featured-posts>Featured Posts</a>
<a class=dropdown-item href=/#accomplishments>Accomplishments</a>
<a class=dropdown-item href=/#achievements>Achievements</a></div></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class=nav-item><a class=nav-link href=https://www.linkedin.com/in/francispanzani/>My  in</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=languageSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><span class="fi fi-gb"></span>
English</a><div class=dropdown-menu aria-labelledby=languageSelector><a class="dropdown-item nav-link languages-item" href=/posts/formations/td_doctrine><span class="fi fi-gb"></span>
English
</a><a class="dropdown-item nav-link languages-item" href=/fr/posts/formations/td_doctrine><span class="fi fi-fr"></span>
French</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/FP_hu_d6ee7720cefea748.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/FPinv_hu_71f330227837aea1.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><a class=list-link href=/posts/welcome/ title=Introduction>Introduction</a></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/> The Courses</a><ul class=active><li><a class=list-link href=/posts/formations/premier/ title="-Read Me First">-Read Me First</a></li><li><a class=list-link href=/posts/formations/formation_ajax/ title=Ajax>Ajax</a></li><li><a class=list-link href=/posts/formations/formation_bootstrap/ title=Bootstrap>Bootstrap</a></li><li><a class=list-link href=/posts/formations/formation_git/ title="Git & Github">Git & Github</a></li><li><a class=list-link href=/posts/formations/formation_html/ title=HTML>HTML</a></li><li><a class=list-link href=/posts/formations/formation_mongodb/ title="MongoDB Base">MongoDB Base</a></li><li><a class=list-link href=/posts/formations/formation_nodejs/ title=NodeJS>NodeJS</a></li><li><a class=list-link href=/posts/formations/formation_python/ title=Python>Python</a></li><li><a class=list-link href=/posts/formations/referencement/ title="Référencement de Site Web">Référencement de Site Web</a></li><li><a class=list-link href=/posts/formations/formation_typescript/ title=TypeScript>TypeScript</a></li><li><a class=list-link href=/posts/formations/formation_uml/ title=Uml>Uml</a></li><li><a class=list-link href=/posts/formations/formation_vuejs/ title="VueJS Base">VueJS Base</a></li><li><a class=list-link href=/posts/formations/formation_xml/ title=XML>XML</a></li><li><a class="active list-link" href=/posts/formations/td_doctrine/ title=" TD Doctrine"> TD Doctrine</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/formations/formation_css/> CSS</a><ul><li><a class=list-link href=/posts/formations/formation_css/base/ title="CSS LvL 1">CSS LvL 1</a></li><li><a class=list-link href=/posts/formations/formation_css/avance/ title="CSS LvL 2">CSS LvL 2</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/formations/formation_js/> Javascript (Vanilla)</a><ul><li><a class=list-link href=/posts/formations/formation_js/lvl1/ title="Javascript LvL 1">Javascript LvL 1</a></li><li><a class=list-link href=/posts/formations/formation_js/lvl2/ title="Javascript LvL 2">Javascript LvL 2</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/formations/formation_php/> Php</a><ul><li><a class=list-link href=/posts/formations/formation_php/lvl1/ title="PhP LvL 1">PhP LvL 1</a></li><li><a class=list-link href=/posts/formations/formation_php/lvl2/ title="PhP LvL 2">PhP LvL 2</a></li><li><a class=list-link href=/posts/formations/formation_php/lvl3/ title="PhP LvL 3">PhP LvL 3</a></li><li><a class=list-link href=/posts/formations/formation_php/lvl4/ title="PhP LvL 4">PhP LvL 4</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/formations/formation_wordpress/> Wordpress</a><ul><li><a class=list-link href=/posts/formations/formation_wordpress/lvl1/ title="Wordpress LvL 1">Wordpress LvL 1</a></li><li><a class=list-link href=/posts/formations/formation_wordpress/lvl2/ title="Wordpress LvL 2">Wordpress LvL 2</a></li></ul></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/divers/> Various Posts</a><ul><li><a class=list-link href=/posts/divers/creation_compte_phpstorm/ title=Creation_compte_PhpStorm>Creation_compte_PhpStorm</a></li><li><a class=list-link href=/posts/divers/installation_xampp/ title="Installation Serveur Web">Installation Serveur Web</a></li><li><a class=list-link href=/posts/divers/portefolio/ title=TP_E_PorteFolio>TP_E_PorteFolio</a></li><li><a class=list-link href=/posts/divers/wsl_w10/ title=Ubuntu_Wsl_LAMP_Win10>Ubuntu_Wsl_LAMP_Win10</a></li><li><a class=list-link href=/posts/divers/markdown-sample/ title="Markdown Sample">Markdown Sample</a></li><li><a class=list-link href=/posts/divers/shortcodes/ title="Shortcodes Sample">Shortcodes Sample</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/posts/formations/td_doctrine/hero.svg)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/avatar_cercle_fp_hu_677daf1abf50a654.png alt="Author Image"><h5 class=author-name>Panzani Francis</h5><p class=text-muted>Saturday, June 5, 2021 | 7 minutes</p></div><div class=title><h1>TD Doctrine 2</h1></div><div class=tags><ul style=padding-left:0></ul></div><div class=post-content id=post-content><h2><em><center>&#x1f4e2; Bonjour à tous et à toutes &#x2757;</center></em></h2><hr><div class="d-sm-block alert alert-primary text-center" role=alert><img style=vertical-align:bottom src=/images/icones/w30/doctrine_30.png> Une fois n'est pas coutume, on va apprendre la technologie du cours via un <mark>Travail Dirigé </mark>en suivant l'excellent tuto suivant :<br><p><a href=https://zestedesavoir.com/tutoriels/1713/doctrine-2-a-lassaut-de-lorm-phare-de-php/les-bases-de-doctrine-2/ target=_blank rel=noopener>https://zestedesavoir.com/tutoriels/1713/doctrine-2-a-lassaut-de-lorm-phare-de-php/les-bases-de-doctrine-2/</a><i class="fas fa-external-link-alt"></i></p></div><p>Pourquoi ce choix ? :</p><ul><li>Pour vous faire travailler sur d&rsquo;autres ressources que les miennes et découvrir que le web fourmille d&rsquo;excellentes ressources (mais y a du buggé ou de l&rsquo;outdated aussi, malheureusement )</li><li>Parce qu&rsquo;il est très bien fait et qu&rsquo;il nous servira de base pour Doctrine 2.0</li><li>Parce que la v3 de doctrine est dans les tuyaux et j&rsquo;avoue avoir la flemme de faire un cours complet sur doctrine 2 pour après le mettre à jour avec la V3 &#x1f445;</li><li>Parceque un bon développeur sait s&rsquo;économiser et être écolo en pratiquant la <i class="fas fa-recycle" style=color:green></i> réutilisation de code (oui oui, ce n&rsquo;est pas de la fain&mldr;.) &#x1f604;</li></ul><blockquote><p><img style=-webkit-user-select:none;margin:auto src=/images/icones/w30/doctrine_30.png> “ The Doctrine Project is the home to several PHP libraries primarily focused on database storage and object mapping. The core projects are the Object Relational Mapper (ORM) and the Database Abstraction Layer (DBAL) it is built upon.<br>Doctrine has been downloaded a total of 2,222,562,433 times!”</p><p>&ndash; <cite><a href=https://www.doctrine-project.org/projects/doctrine-orm/en/current/tutorials/getting-started.html target=_blank rel=noopener>doctrine-project.org <i class="fas fa-external-link-alt"></i></a></cite><hr><img style=-webkit-user-select:none;margin:auto src=/images/icones/w30/doctrine_30.png> “ Doctrine est un ORM (couche d&rsquo;abstraction à la base de données) pour PHP. Il s&rsquo;agit d&rsquo;un logiciel libre sous licence GNU LGPL.<br>Doctrine est l&rsquo;ORM par défaut du framework Symfony <img style=-webkit-user-select:none;margin:auto src=/images/icones/w30/Symfony2_30.png>(depuis la version 1.3 de ce framework). Cependant son utilisation dans le cadre d&rsquo;un projet développé avec Symfony est optionnelle.<br>De plus, il peut être utilisé avec de nombreux autres frameworks tels que Zend Framework, CodeIgniter, FLOW3 ou encore Lithium.”</p><p>&ndash; <cite><a href=https://fr.wikipedia.org/wiki/Doctrine_%28ORM%29 title="Définition à lire pour bien comprendre" target=_blank rel=noopener>wikipedia <i class="fas fa-external-link-alt"></i></a></cite></p></blockquote><p>On va donc voir ensemble comment installer, configurer et utiliser les opérations de base de l’ORM Doctrine (qui est l&rsquo;un si ce n&rsquo;est le plus utilisé avec PhP) via la modélisation et la réalisation d&rsquo;une application simple de gestion de sondages.</p><p><em><a href=https://fr.wikipedia.org/wiki/Mapping_objet-relationnel target=_blank rel=noopener>L&rsquo;ORM <i class="fas fa-external-link-alt"></i></a> se place en interface entre un programme applicatif , ici notre WEB APP en Php, et une base de données relationnelle (<i class="fas fa-database"></i> MySQL) pour simuler une base de données orientée objet. Ce programme définit des correspondances entre les schémas de la base de données et les classes du programme applicatif.<br><img align=right width=40% src=https://www.drupal.org/files/project-images/doctrine-layers_1.jpg>
En résumé dans notre code php on va donner des instructions à l&rsquo;orm pour qu&rsquo;il sauvegarde, crée, modifie, supprime nos objets ou leurs propriétés très facilement sans passer par nos bonnes vieilles requêtes mysqli ou PDO (depuis php5.1).</em></p><p>Crée en 2066 il s&rsquo;inspire d&rsquo;un autre ORM très célèbre qui est hibernate pour la techno <i class="fab fa-2x fa-java"></i> Java.<br>Il a aussi son langage de requête orienté objet, le Doctrine Query Langage (DQL).<br>Il peut être utilisé à la place du langage SQL pour créer les requêtes d&rsquo;accès et de manipulation des données de la base de données. Sa syntaxe s&rsquo;inspire du Hibernate Query Langage, le langage de requête d&rsquo;<img style=vertical-align:middle height=45px src=/images/icones/hibernate.png alt=Hibernate>, et du <i class="fab fa-2x fa-java"></i> Java Persistence Query Language, celui de JPA.</p><p>Doctrine se compose de 2 grandes parties :</p><ul><li>Doctrine ORM (la liaison entre nos objets et notre BDD s&rsquo;appuie sur DBAL)</li><li>Doctrine DBAL (DataBase Abstraction Layer, Couche d&rsquo;abstraction de base de données en français) qui s&rsquo;appuie sur PDO (Php Data Object)</li></ul><p>Paramétrons notre environnement de développement (ça va être simple &mldr; &#x1f604;) afin de pouvoir démarrer le TD :</p><h2 id=todo--roller_coaster>TODO &#x1f3a2;:</h2><ul><li><p><code>Télécharger</code> <em>PUIS</em> <code>installer</code> <img style=vertical-align:bottom height=25px src=/images/icones/Xampp_logo.svg.png alt=Xampp> (une version qui supporte php 7+) :<a href=https://www.apachefriends.org/fr/index.html target=_blank rel=noopener>->ICI <i class="fas fa-external-link-alt"></i>&lt;-</a>.</p><ul><li>On le mettra dans un dossier le plus proche de la racine</li><li>On installera a minima <img style=vertical-align:middle height=30px src=/images/icones/kisspng-logo-apache-http-server-apache-software-foundation-apache-performance-tuning-sysinfo-io-5b7c0e127fe8d0.6727913515348567225239.png alt=Apache> / <img style=vertical-align:middle src=/images/icones/w30/mysql_30.png alt=img>MySQL / <img style=vertical-align:middle height=25px src=/images/icones/php_h40.png alt=PhP> / <img style=vertical-align:bottom height=50px src=/images/icones/PhpMyAdmin_logo.png alt=phpMyAdmin></li></ul></li><li><p><code>Télécharger</code> <em>PUIS</em> <code>installer</code> <img style=vertical-align:bottom height=30px src="/images/icones/Visual studio code logo.png" alt=img> Visual Studio Code :<a href=https://code.visualstudio.com/ target=_blank rel=noopener>->ICI <i class="fas fa-external-link-alt"></i>&lt;- </a>.
<img style=float:right src=PhpExtension.png alt=" ils sont complémentaires :)" tooltip="ils sont complémentaires :)"></p></li><li><p>Installer les 2 extensions <i class="fab fa-php fa-2x" style=vertical-align:middle;color:blue></i> de Felix Becker (Un grand merci à lui au passage, la première pour le debuggage, la seconde pour le linter ) pour VSC : <kbd>CTRL + SHIFT + X</kbd> puis tapez PHP, c&rsquo;est simple ce sont les 2 et 3 ieme les plus téléchargées (donc tout en haut) →→→</p></li><li><p>Il faudra peut-être redémarrer entre-temps VSC, faites lui plaisir, faites le s&rsquo;il vous le demande.</p></li><li><p>Ouvrez un répertoire de travail File -> Open Folder puis</p><ul><li>On va dans le menu des fichiers en haut à gauche <kbd>CTRL + SHIFT + E</kbd></li><li>Ensuite soit on clique sur le symbole situé en (1) soit on fait File -> New file, soit on fait <kbd>CTRL + N</kbd> pour créer un nouveau fichier que l&rsquo;on va enregistrer <kbd>CTRL + S</kbd> en tant que <mark>hellodoctrine<code>.php</code></mark></li><li>Et ensuite on entre à l&rsquo;intérieur le code suivant :</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#34;hello doctrine&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>phpinfo</span>();
</span></span></code></pre></div><ul><li>Lancez-le dans votre navigateur via votre serveur local afin de vous assurez que vous êtes bien en php7+ (si ce n&rsquo;est pas le cas, faites le nécessaire afin d&rsquo;avoir votre serveur local en php v7+ de fonctionnel, cf cours précédents).</li><li>Passons aux choses sérieuses, on va installer <img style=vertical-align:bottom height=30px src=/images/icones/w30/composer_30.png alt=img> Composer<a href=https://getcomposer.org/ target=_blank rel=noopener>->ICI <i class="fas fa-external-link-alt"></i>&lt;-</a><ul><li>Cliquez sur download, pour ceux sur Windows, <code>Télécharger</code> <em>PUIS</em> <code>Installer</code> l&rsquo;exécutable, pour les autres, suivez la doc officielle</li><li>Dans les settings, vérifier que le chemin est bien celui de l&rsquo;interpréteur php que vous allez lancer (vous pouvez en avoir plusieurs, a vous de choisir).<ul><li>Si vous ne voyez rien, faites browse et allez dans le dossier d&rsquo;installation de votre xampp, dans le sous-dossier php :
<img src=/posts/formations/td_doctrine/composer1.png alt=-></li><li>Puis on fait Next en lisant bien ce qui est écrit et en réagissant au besoin.</li><li>Dans notre dossier ouvert sur Visual Studio Code on fait un <i class="fas fa-mouse"></i> clic <code>DROIT</code> sur notre fichier puis <code>open in integrated terminal</code> (ou alors vous ouvrez un powershell/CMD/Windows Terminal dans le dossier) puis vous tapez la commande :</li></ul></li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>        composer require doctrine/orm:^2.5
</span></span></code></pre></div><p>Ce qui nous donne :
<img src=composer2.png alt="en bas tapez : composer require doctrine/orm:^2.5"></p><div class="d-sm-block alert alert-warning text-center">Si vous avez des messages en rouge, il vous <mark>faut fermer puis relancer Visual Studio Code </mark>car les variables d'environnement avec lesquelles VSC à été démarré ont changées depuis l'installation de Composer</div><img style=float:right src=composer3.png alt="en bas tapez : composer require doctrine/orm:^2.5"><p>Composer va faire le boulot pour nous, tout télécharger et installer dans notre dossier de travail →→→</p><ul><li>Passons à sa configuration (copiez-coller le code suivant dans un fichier bootstrap<code>.php</code>):</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>require_once</span> <span style=color:#a6e22e>join</span>(<span style=color:#a6e22e>DIRECTORY_SEPARATOR</span>, [<span style=color:#66d9ef>__DIR__</span>, <span style=color:#e6db74>&#39;vendor&#39;</span>,
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;autoload.php&#39;</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Doctrine\ORM\Tools\Setup</span>;
</span></span><span style=display:flex><span> <span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Doctrine\ORM\EntityManager</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$entitiesPath <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span> <span style=color:#a6e22e>join</span>(<span style=color:#a6e22e>DIRECTORY_SEPARATOR</span>, [<span style=color:#66d9ef>__DIR__</span>, <span style=color:#e6db74>&#34;src&#34;</span>, <span style=color:#e6db74>&#34;Entity&#34;</span>])
</span></span><span style=display:flex><span> ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> $isDevMode <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span> $proxyDir <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span> $cache <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span> $useSimpleAnnotationReader <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Connexion à la base de données
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  $dbParams <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;driver&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;pdo_mysql&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;host&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;localhost&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;charset&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;utf8&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;user&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;root&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;password&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;dbname&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;poll&#39;</span>,
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>  $config <span style=color:#f92672>=</span> <span style=color:#a6e22e>Setup</span><span style=color:#f92672>::</span><span style=color:#a6e22e>createAnnotationMetadataConfiguration</span>(
</span></span><span style=display:flex><span>  $entitiesPath,
</span></span><span style=display:flex><span>  $isDevMode,
</span></span><span style=display:flex><span>  $proxyDir,
</span></span><span style=display:flex><span>  $cache,
</span></span><span style=display:flex><span>  $useSimpleAnnotationReader
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>  $entityManager <span style=color:#f92672>=</span> <span style=color:#a6e22e>EntityManager</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>($dbParams, $config);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> $entityManager;
</span></span></code></pre></div><div class="d-sm-block alert alert-info border border-info">La variable $dbParams désigne les paramètres de connexion que nous allons utiliser. Pour notre cas, nous aurons donc une base de données MySQL en local nommée <mark>poll</mark> avec comme utilisateur <mark>root sans mot de passe</mark>. À ce stade, seul le paramètre $dbParams nous intéresse. Nous aurons l’occasion d’aborder et d’expliciter l’utilité des autres paramètres par la suite.</div><ul><li>Puis créons un autre fichier pour finaliser la configuration de Doctrine (copiez-coller le code suivant dans un fichier cli-config<code>.php</code>):</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span> <span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span> <span style=color:#75715e>#### cli-config.php
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$entityManager <span style=color:#f92672>=</span> <span style=color:#66d9ef>require_once</span> <span style=color:#a6e22e>join</span>(<span style=color:#a6e22e>DIRECTORY_SEPARATOR</span>, [<span style=color:#66d9ef>__DIR__</span>, <span style=color:#e6db74>&#39;bootstrap.php&#39;</span>]);
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Doctrine\ORM\Tools\Console\ConsoleRunner</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ConsoleRunner</span><span style=color:#f92672>::</span><span style=color:#a6e22e>createHelperSet</span>($entityManager);
</span></span></code></pre></div><ul><li>On vérifie que tout est bon en tappant la commande suivante dans l&rsquo;invite de commande <i class="fas fa-terminal"></i> :</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>vendor/bin/doctrine
</span></span></code></pre></div><p>PS : Quand tout est bon on a pas d&rsquo;erreur à la fin et on peut taper nos <i class="fas fa-terminal" style=background-color:grey>lignes de commandes </i>pour Doctrine &#x1f604;
<img src=/posts/formations/td_doctrine/composer4.png alt=-></p><ul><li>Pour finir on va configurer Composer pour qu&rsquo;il gère l&rsquo;autoloading, pour ce faire modifier le fichier config.json avec le code suivant :</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;require&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;doctrine/orm&#34;</span>: <span style=color:#e6db74>&#34;2.5&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;autoload&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;psr-4&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Tuto\\&#34;</span>: <span style=color:#e6db74>&#34;src/&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><img style=float:right src=composer5.png alt="en bas tapez : composer dump-autoload"><ul><li>On recharge la configuration de l&rsquo;autoloader de Composer via la commande suivante :</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>composer dump-autoload
</span></span></code></pre></div><br><img style=vertical-align:bottom src=/images/icones/w30/doctrine_30.png> Maintenant que Doctrine est correctement installé et configuré, nous allons l’exploiter dans notre projet pour mettre en place un modèle de données full Orienté Objet<hr><div class="d-sm-block alert alert-success text-left" role=alert><p>&#x1f393; <a href=http://franpan.free.fr/formation/_doctrine327 title="lien vers le site contenant les fichiers de la formation" target=_blank rel=noopener>Afin de débuter la Formation sur Doctrine ensemble, vous aurez besoin de suivre les instructions du &#x1f4da;support suivant et/ou de récupérer les éléments de la <img style=vertical-align:bottom src=/images/icones/w30/capsule_30.png alt=C>apsule : (Logins & Passswords &#x1f510; donnés par le formateur <i class="fas fa-chalkboard-teacher"></i> ) <i class="fas fa-external-link-alt"></i>.</a></p></div><p>Merci de garder pour vous les ressources que vous y trouverez et de ne pas les diffuser &#x1f60f;<br>Merci de m&rsquo;avertir de toute erreur ou coquille qui m&rsquo;auraient échapées &#x1f60d;</p><p>&#169;&#xfe0f; &#x1f6ab; Do not distribute &#x1f60c;</p></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2ffransee.github.io%2fposts%2fformations%2ftd_doctrine%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=https%3a%2f%2ffransee.github.io%2fposts%2fformations%2ftd_doctrine%2f&title=TD%20Doctrine%202" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2ffransee.github.io%2fposts%2fformations%2ftd_doctrine%2f&title=TD%20Doctrine%202" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-mastodon" href="https://mastodon.social/share?text=TD%20Doctrine%202 - https%3a%2f%2ffransee.github.io%2fposts%2fformations%2ftd_doctrine%2f" target=_blank><i class="fab fa-mastodon"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=TD%20Doctrine%202 https%3a%2f%2ffransee.github.io%2fposts%2fformations%2ftd_doctrine%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=TD%20Doctrine%202&body=https%3a%2f%2ffransee.github.io%2fposts%2fformations%2ftd_doctrine%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/fransee/fransee.github.io/edit/main/content/posts/formations/td_doctrine/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/formations/formation_xml/ title="Formation sur XML" class="btn filled-button"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Formation sur XML</div></a></div><div class="col-md-6 next-article"><a href=/posts/formations/formation_css/base/ title="Formation CSS 3 - First Level - " class="btn filled-button"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Formation CSS 3 - First Level -</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#><em><center>&#x1f4e2; Bonjour à tous et à toutes &#x2757;</center></em></a></li><li><a href=#todo--roller_coaster>TODO &#x1f3a2;:</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://fransee.github.io/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://fransee.github.io/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://fransee.github.io/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://fransee.github.io/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://fransee.github.io/#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://fransee.github.io/#featured-posts>Featured Posts</a></li><li class=nav-item><a class=smooth-scroll href=https://fransee.github.io/#accomplishments>Accomplishments</a></li><li class=nav-item><a class=smooth-scroll href=https://fransee.github.io/#achievements>Achievements</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:francis.panzani@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>francis.panzani@gmail.com</span></a></li><li><a href=https://github.com/Francis-Panzani target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>Francis-Panzani</span></a></li><li><a href=https://www.linkedin.com/in/francispanzani target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Panzani Francis</span></a></li><li><span><i class="fas fa-phone-alt"></i></span> <span>+06 first contact via mail</span></li><li><span>Researchgate: </span><span>Francis-Panzani</span></li><button id=openbas class="btn btn-dark g-recaptcha" data-sitekey=6LcF6vUdAAAAAF0buCEfK2kyuTcmyl2tPp5Uhyuh data-callback=onSubmit data-action=submit id=inputsubmit></button></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener><img src=/images/theme-logo_hu_b3360284c55cf72d.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2025 Copyright Francis Panzani. All Rights reserved.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.91bab9af3ea6af3cefda36641d1fdc76d78775d2a99c5cbbfd892093035465cf.js integrity="sha256-kbq5rz6mrzzv2jZkHR/cdteHddKpnFy7/YkgkwNUZc8=" defer></script></body></html>